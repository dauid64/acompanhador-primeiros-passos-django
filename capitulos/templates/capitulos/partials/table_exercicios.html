<!-- Tabela moderna de exercícios -->
<div class="exercises-table-container">
  <div class="responsive-exercises-wrapper">
    <table class="exercises-table">
      <thead>
        <tr>
          <th class="exercise-name-col">
            <div class="th-content">
              <svg class="th-icon" viewBox="0 0 24 24" width="18" height="18">
                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
              </svg>
              <span>Exercício</span>
            </div>
          </th>
          <th class="completion-col">
            <div class="th-content">
              <svg class="th-icon" viewBox="0 0 24 24" width="18" height="18">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
              <span>Status</span>
            </div>
          </th>
          <th class="difficulty-col">
            <div class="th-content">
              <svg class="th-icon" viewBox="0 0 24 24" width="18" height="18">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
              <div class="th-text">
                <span class="main-text">Dificuldade</span>
                <span class="sub-text">Fácil → Difícil</span>
              </div>
            </div>
          </th>
          <th class="rating-col">
            <div class="th-content">
              <svg class="th-icon" viewBox="0 0 24 24" width="18" height="18">
                <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5 2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.04L12,21.35Z"/>
              </svg>
              <div class="th-text">
                <span class="main-text">Avaliação</span>
                <span class="sub-text">Não gostei → Amei</span>
              </div>
            </div>
          </th>
          <th class="actions-col">
            <div class="th-content">
              <svg class="th-icon" viewBox="0 0 24 24" width="18" height="18">
                <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"/>
              </svg>
              <span>Ações</span>
            </div>
          </th>
        </tr>
      </thead>
      <tbody>
        {% for exercicio_usuario in exercicios_usuario %}
          <tr class="exercise-row" data-exercise-id="{{ exercicio_usuario.id }}" data-completed="{{ exercicio_usuario.feito|yesno:'true,false' }}">
            <!-- Nome do Exercício -->
            <td class="exercise-name" data-label="Exercício">
              <div class="exercise-info">
                <div class="exercise-order">{{ forloop.counter }}</div>
                <div class="exercise-details">
                  <a href="{{ exercicio_usuario.exercicio.link }}" 
                     class="exercise-link" 
                     target="_blank"
                     title="Abrir exercício em nova aba">
                    <span class="exercise-title">{{ exercicio_usuario.exercicio.nome }}</span>
                    <svg class="external-link-icon" viewBox="0 0 24 24" width="14" height="14">
                      <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"/>
                    </svg>
                  </a>
                  {% if exercicio_usuario.feito %}
                    <div class="completion-badge">
                      <svg class="badge-icon" viewBox="0 0 24 24" width="12" height="12">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                      </svg>
                      Concluído
                    </div>
                  {% endif %}
                </div>
              </div>
            </td>
            
            <!-- Status de Conclusão -->
            <td class="completion-status" data-label="Status">
              <div class="checkbox-wrapper">
                <label class="modern-checkbox" title="{% if exercicio_usuario.feito %}Marcar como não feito{% else %}Marcar como feito{% endif %}">
                  <div class="info" data-url="{% url 'capitulos:feito_update' exercicio_usuario.id %}"></div>
                  <input type="checkbox" 
                         class="change-feito checkbox-input" 
                         {{ exercicio_usuario.feito|yesno:"checked," }} 
                         id="feito_{{ exercicio_usuario.id }}">
                  <div class="checkbox-design">
                    <svg class="check-icon" viewBox="0 0 24 24" width="14" height="14">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                  </div>
                  <span class="checkbox-label">
                    {% if exercicio_usuario.feito %}Feito{% else %}Pendente{% endif %}
                  </span>
                </label>
              </div>
            </td>
            
            <!-- Avaliação de Dificuldade -->
            <td class="difficulty-rating" data-label="Dificuldade">
              <div class="rating-container rating-dificuldade rating">
                <div class="info" data-url="{% url 'capitulos:dificuldade_update' exercicio_usuario.id %}"></div>
                <div class="rating-label">Dificuldade</div>
                <div class="stars-container">
                  {% for i in "01234"|make_list %}
                    <input type="radio" 
                           id="star{{ forloop.counter0 }}_{{ exercicio_usuario.id }}" 
                           name="dificuldade_{{ exercicio_usuario.id }}" 
                           value="{{ forloop.counter0 }}"
                           class="star-input">
                    <label for="star{{ forloop.counter0 }}_{{ exercicio_usuario.id }}" 
                           title="{{ forloop.counter0 }} estrela{{ forloop.counter0|pluralize }}" 
                           class="star-label change-dificuldade">
                      <svg class="star-icon {% if exercicio_usuario.dificuldade >= forloop.counter0 %}checked{% endif %}" 
                           viewBox="0 0 24 24" width="20" height="20">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                      </svg>
                    </label>
                  {% endfor %}
                </div>
                <div class="rating-text">
                  {% if exercicio_usuario.dificuldade == 0 %}Muito Fácil
                  {% elif exercicio_usuario.dificuldade == 1 %}Fácil
                  {% elif exercicio_usuario.dificuldade == 2 %}Médio
                  {% elif exercicio_usuario.dificuldade == 3 %}Difícil
                  {% elif exercicio_usuario.dificuldade == 4 %}Muito Difícil
                  {% else %}Não avaliado{% endif %}
                </div>
              </div>
            </td>
            
            <!-- Avaliação de Satisfação -->
            <td class="satisfaction-rating" data-label="Avaliação">
              <div class="rating-container rating-nota rating">
                <div class="info" data-url="{% url 'capitulos:nota_update' exercicio_usuario.id %}"></div>
                <div class="rating-label">Satisfação</div>
                <div class="hearts-container">
                  {% for i in "01234"|make_list %}
                    <input type="radio" 
                           id="heart{{ forloop.counter0 }}_{{ exercicio_usuario.id }}" 
                           name="nota_{{ exercicio_usuario.id }}" 
                           value="{{ forloop.counter0 }}"
                           class="heart-input">
                    <label for="heart{{ forloop.counter0 }}_{{ exercicio_usuario.id }}" 
                           title="{{ forloop.counter0 }} coração{{ forloop.counter0|pluralize:'ões' }}" 
                           class="heart-label change-nota">
                      <svg class="heart-icon {% if exercicio_usuario.nota >= forloop.counter0 %}checked{% endif %}" 
                           viewBox="0 0 24 24" width="20" height="20">
                        <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5 2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.04L12,21.35Z"/>
                      </svg>
                    </label>
                  {% endfor %}
                </div>
                <div class="rating-text">
                  {% if exercicio_usuario.nota == 0 %}Não gostei
                  {% elif exercicio_usuario.nota == 1 %}Pouco interessante
                  {% elif exercicio_usuario.nota == 2 %}Interessante
                  {% elif exercicio_usuario.nota == 3 %}Muito bom
                  {% elif exercicio_usuario.nota == 4 %}Amei!
                  {% else %}Não avaliado{% endif %}
                </div>
              </div>
            </td>
            
            <!-- Ações -->
            <td class="exercise-actions" data-label="Ações">
              <div class="action-buttons">
                <a href="{% url 'capitulos:exercicio_usuario_detail' exercicio_usuario.id %}" 
                   class="action-btn primary"
                   title="Ver detalhes do exercício">
                  <svg class="btn-icon" viewBox="0 0 24 24" width="16" height="16">
                    <path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>
                  </svg>
                  <span class="btn-text">Ver</span>
                </a>
                
                <a href="{{ exercicio_usuario.exercicio.link }}" 
                   class="action-btn secondary"
                   target="_blank"
                   title="Abrir exercício original">
                  <svg class="btn-icon" viewBox="0 0 24 24" width="16" height="16">
                    <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"/>
                  </svg>
                  <span class="btn-text">Abrir Vídeo</span>
                </a>
              </div>
            </td>
          </tr>
        {% empty %}
          <tr class="empty-state">
            <td colspan="5">
              <div class="empty-content">
                <svg class="empty-icon" viewBox="0 0 24 24" width="48" height="48">
                  <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
                <h3>Nenhum exercício encontrado</h3>
                <p>Este capítulo ainda não possui exercícios cadastrados.</p>
              </div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>